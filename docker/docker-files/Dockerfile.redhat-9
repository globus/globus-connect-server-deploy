# syntax=docker/dockerfile:1.3-labs

############## STAGE 1 - Prepare the image for GCS installation ################
FROM redhat/ubi9

RUN <<EOF
    yum install -y coreutils-single gzip sudo tar util-linux
EOF

#
# The Redhat repo doesn't have the remaining dependencies. Grab them from Rocky.
#

# This is the base64 of partials/yum/
COPY <<EOF /yum.64
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
EOF

RUN <<EOF
    set -e
    cat /yum.64 | base64 -d | (cd /; tar zxf -)
    yum install -y -c /yum/rockylinux.repo cjose python3
EOF

##################### STAGE 2 - Install GCS using Ansible ######################
# This is the base64 compressed tar of the ansible repo directory
COPY <<EOF /ansible.64
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
EOF

RUN <<EOF
    set -e
    /usr/bin/python3 -m venv /venv
    /venv/bin/pip install --upgrade pip
    # Install wheel to avoid the warning that setup.py is being used when
    # installing Ansible
    /venv/bin/pip install wheel
    /venv/bin/pip install ansible
    cat /ansible.64 | base64 -d | (cd /; tar zxf -)
EOF

ARG GLOBUS_ANSIBLE_OPTIONS

# Modifying this arg value on the build command line will cause RUN to reinstall
# Globus instead of using the previous, cached iteration (if it exists). Useful
# for speeding up re-runs to get newer Globus versions.
ARG CACHEBUST=1

RUN <<EOF
    (cd /ansible; /venv/bin/ansible-playbook playbook.yml ${GLOBUS_ANSIBLE_OPTIONS})
EOF

######################### STAGE 3 - Prepare GCS Image ##########################
LABEL maintainer="support@globus.org"

# This is the base64 compressed tar of entrypoint.sh
COPY <<EOF /entrypoint.64
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
eBgP42E8jIfxML5s/Aebis1+ACgAAA==
EOF

RUN <<EOF
    cat /entrypoint.64 | base64 -d | tar zxf - > /entrypoint.sh
EOF

# These are the default ports in use by GCSv5.4. Currently, they can not be changed.
#   443 : HTTPD service for GCS Manager API and HTTPS access to collections
#  50000-51000 : Default port range for incoming data transfer tasks
EXPOSE 443/tcp 50000-51000/tcp

# Default command unless overridden with 'docker run --entrypoint'
ENTRYPOINT ["/entrypoint.sh"]
# Default options to ENTRYPOINT unless overridden with 'docker run arg1...'
CMD []
