# syntax=docker/dockerfile:1.3-labs

############## STAGE 1 - Prepare the image for GCS installation ################
FROM redhat/ubi9

RUN <<EOF
    yum install -y coreutils-single gzip sudo tar util-linux
EOF

#
# The Redhat repo doesn't have the remaining dependencies. Grab them from Rocky.
#

# This is the base64 of partials/yum/
COPY <<EOF /yum.64
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
EOF

RUN <<EOF
    set -e
    cat /yum.64 | base64 -d | (cd /; tar zxf -)
    yum install -y -c /yum/rockylinux.repo cjose python3
EOF

##################### STAGE 2 - Install GCS using Ansible ######################
# This is the base64 compressed tar of the ansible repo directory
COPY <<EOF /ansible.64
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
EOF

RUN <<EOF
    set -e
    /usr/bin/python3 -m venv /venv
    /venv/bin/pip install --upgrade pip
    # Install wheel to avoid the warning that setup.py is being used when
    # installing Ansible
    /venv/bin/pip install wheel
    /venv/bin/pip install ansible
    cat /ansible.64 | base64 -d | (cd /; tar zxf -)
EOF

ARG GLOBUS_ANSIBLE_OPTIONS

# Modifying this arg value on the build command line will cause RUN to reinstall
# Globus instead of using the previous, cached iteration (if it exists). Useful
# for speeding up re-runs to get newer Globus versions.
ARG CACHEBUST=1

RUN <<EOF
    (cd /ansible; /venv/bin/ansible-playbook playbook.yml ${GLOBUS_ANSIBLE_OPTIONS})
EOF

######################### STAGE 3 - Prepare GCS Image ##########################
LABEL maintainer="support@globus.org"

# This is the base64 compressed tar of entrypoint.sh
COPY <<EOF /entrypoint.64
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
YTyMh/Ewvm78B7xmstMAKAAA
EOF

RUN <<EOF
    cat /entrypoint.64 | base64 -d | tar zxf - > /entrypoint.sh
EOF

# These are the default ports in use by GCSv5.4. Currently, they can not be changed.
#   443 : HTTPD service for GCS Manager API and HTTPS access to collections
#  50000-51000 : Default port range for incoming data transfer tasks
EXPOSE 443/tcp 50000-51000/tcp

# Default command unless overriden with 'docker run --entrypoint'
ENTRYPOINT ["/entrypoint.sh"]
# Default options to ENTRYPOINT unless overriden with 'docker run arg1...'
CMD []
