# syntax=docker/dockerfile:1.3-labs

############## STAGE 1 - Prepare the image for GCS installation ################
FROM redhat/ubi8

RUN <<EOF
    yum install -y coreutils-single gzip sudo tar util-linux
EOF

#
# The Redhat repo doesn't have the remaining dependencies. Grab them from Rocky.
#

# This is the base64 of partials/yum/
COPY <<EOF /yum.64
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
EOF

RUN <<EOF
    set -e
    cat /yum.64 | base64 -d | (cd /; tar zxf -)
    yum install -y -c /yum/rockylinux.repo libnice python3
EOF

##################### STAGE 2 - Install GCS using Ansible ######################
# This is the base64 compressed tar of the ansible repo directory
COPY <<EOF /ansible.64
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
EOF

RUN <<EOF
    set -e
    /usr/bin/python3 -m venv /venv
    /venv/bin/pip install --upgrade pip
    # Install wheel to avoid the warning that setup.py is being used when
    # installing Ansible
    /venv/bin/pip install wheel
    /venv/bin/pip install ansible
    cat /ansible.64 | base64 -d | (cd /; tar zxf -)
EOF

ARG GLOBUS_ANSIBLE_OPTIONS

# Modifying this arg value on the build command line will cause RUN to reinstall
# Globus instead of using the previous, cached iteration (if it exists). Useful
# for speeding up re-runs to get newer Globus versions.
ARG CACHEBUST=1

RUN <<EOF
    (cd /ansible; /venv/bin/ansible-playbook playbook.yml ${GLOBUS_ANSIBLE_OPTIONS})
EOF

######################### STAGE 3 - Prepare GCS Image ##########################
LABEL maintainer="support@globus.org"

# This is the base64 compressed tar of entrypoint.sh
COPY <<EOF /entrypoint.64
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
eBgP42E8jIfxML5s/Aebis1+ACgAAA==
EOF

RUN <<EOF
    cat /entrypoint.64 | base64 -d | tar zxf - > /entrypoint.sh
EOF

# These are the default ports in use by GCSv5.4. Currently, they can not be changed.
#   443 : HTTPD service for GCS Manager API and HTTPS access to collections
#  50000-51000 : Default port range for incoming data transfer tasks
EXPOSE 443/tcp 50000-51000/tcp

# Default command unless overridden with 'docker run --entrypoint'
ENTRYPOINT ["/entrypoint.sh"]
# Default options to ENTRYPOINT unless overridden with 'docker run arg1...'
CMD []
