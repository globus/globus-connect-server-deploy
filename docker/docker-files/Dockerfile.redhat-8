# syntax=docker/dockerfile:1.3-labs

############## STAGE 1 - Prepare the image for GCS installation ################
FROM redhat/ubi8

RUN <<EOF
    yum install -y coreutils-single gzip sudo tar util-linux
EOF

#
# The Redhat repo doesn't have the remaining dependencies. Grab them from Rocky.
#

# This is the base64 of partials/yum/
COPY <<EOF /yum.64
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
EOF

RUN <<EOF
    set -e
    cat /yum.64 | base64 -d | (cd /; tar zxf -)
    yum install -y -c /yum/rockylinux.repo libnice python3
EOF

##################### STAGE 2 - Install GCS using Ansible ######################
# This is the base64 compressed tar of the ansible repo directory
COPY <<EOF /ansible.64
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
EOF

RUN <<EOF
    set -e
    /usr/bin/python3 -m venv /venv
    /venv/bin/pip install --upgrade pip
    # Install wheel to avoid the warning that setup.py is being used when
    # installing Ansible
    /venv/bin/pip install wheel
    /venv/bin/pip install ansible
    cat /ansible.64 | base64 -d | (cd /; tar zxf -)
EOF

ARG GLOBUS_ANSIBLE_OPTIONS

# Modifying this arg value on the build command line will cause RUN to reinstall
# Globus instead of using the previous, cached iteration (if it exists). Useful
# for speeding up re-runs to get newer Globus versions.
ARG CACHEBUST=1

RUN <<EOF
    (cd /ansible; /venv/bin/ansible-playbook playbook.yml ${GLOBUS_ANSIBLE_OPTIONS})
EOF

######################### STAGE 3 - Prepare GCS Image ##########################
LABEL maintainer="support@globus.org"

# This is the base64 compressed tar of entrypoint.sh
COPY <<EOF /entrypoint.64
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
eBgP42E8jIfxML5s/Aebis1+ACgAAA==
EOF

RUN <<EOF
    cat /entrypoint.64 | base64 -d | tar zxf - > /entrypoint.sh
EOF

# These are the default ports in use by GCSv5.4. Currently, they can not be changed.
#   443 : HTTPD service for GCS Manager API and HTTPS access to collections
#  50000-51000 : Default port range for incoming data transfer tasks
EXPOSE 443/tcp 50000-51000/tcp

# Default command unless overriden with 'docker run --entrypoint'
ENTRYPOINT ["/entrypoint.sh"]
# Default options to ENTRYPOINT unless overriden with 'docker run arg1...'
CMD []
