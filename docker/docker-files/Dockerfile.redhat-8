# syntax=docker/dockerfile:1.3-labs

############## STAGE 1 - Prepare the image for GCS installation ################
FROM redhat/ubi8

RUN <<EOF
    yum install -y coreutils-single gzip sudo tar util-linux
EOF

#
# The Redhat repo doesn't have the remaining dependencies. Grab them from Rocky.
#

# This is the base64 of partials/yum/
COPY <<EOF /yum.64
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
AA==
EOF

RUN <<EOF
    set -e
    cat /yum.64 | base64 -d | (cd /; tar zxf -)
    yum install -y -c /yum/rockylinux.repo libnice python3
EOF

##################### STAGE 2 - Install GCS using Ansible ######################
# This is the base64 compressed tar of the ansible repo directory
COPY <<EOF /ansible.64
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
EOF

RUN <<EOF
    set -e
    /usr/bin/python3 -m venv /venv
    /venv/bin/pip install --upgrade pip
    # Install wheel to avoid the warning that setup.py is being used when
    # installing Ansible
    /venv/bin/pip install wheel
    /venv/bin/pip install ansible
    cat /ansible.64 | base64 -d | (cd /; tar zxf -)
EOF

ARG GLOBUS_ANSIBLE_OPTIONS

# Modifying this arg value on the build command line will cause RUN to reinstall
# Globus instead of using the previous, cached iteration (if it exists). Useful
# for speeding up re-runs to get newer Globus versions.
ARG CACHEBUST=1

RUN <<EOF
    (cd /ansible; /venv/bin/ansible-playbook playbook.yml ${GLOBUS_ANSIBLE_OPTIONS})
EOF

######################### STAGE 3 - Prepare GCS Image ##########################
LABEL maintainer="support@globus.org"

# This is the base64 compressed tar of entrypoint.sh
COPY <<EOF /entrypoint.64
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
eBgP42E8jIfxML5s/Aebis1+ACgAAA==
EOF

RUN <<EOF
    cat /entrypoint.64 | base64 -d | tar zxf - > /entrypoint.sh
EOF

# These are the default ports in use by GCSv5.4. Currently, they can not be changed.
#   443 : HTTPD service for GCS Manager API and HTTPS access to collections
#  50000-51000 : Default port range for incoming data transfer tasks
EXPOSE 443/tcp 50000-51000/tcp

# Default command unless overridden with 'docker run --entrypoint'
ENTRYPOINT ["/entrypoint.sh"]
# Default options to ENTRYPOINT unless overridden with 'docker run arg1...'
CMD []
